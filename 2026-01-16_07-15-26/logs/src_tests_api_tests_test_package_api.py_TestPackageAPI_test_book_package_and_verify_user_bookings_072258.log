2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - Retrieved credentials from environment for: geo.qa.bot@gmail.com
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - Attempting login with email: geo.qa.bot@gmail.com
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - API Request: POST https://api.dev.gowithgeo.com/api/auth/login
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - API Response: 200
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - Token extracted via response_body (length: 167, valid)
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - ‚úÖ Auth token set from response body (Authorization header)
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - SUCCESS: ‚úÖ Login successful - token set via response_body
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - SUCCESS: ‚úÖ Authenticated successfully (token length: 167)
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - ‚úÖ Auth token set from cookies (Cookie header)
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - ‚úÖ Auth token set from response body (Authorization header)
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - üîç DEBUG: Test phase - setup for src/tests/api_tests/test_package_api.py::TestPackageAPI::test_book_package_and_verify_user_bookings - Skipped: False
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - === Testing Book Package and Verify User Bookings ===
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - API Request: GET https://api.dev.gowithgeo.com/api/package/all
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - API Response: 200
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - Selected package: Christmas Eve (ID: 15)
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - Using pricing text: Personalized
2026-01-16 07:22:52 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - API Request: GET https://api.dev.gowithgeo.com/api/package/user/booked-packages
2026-01-16 07:22:53 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - API Response: 200
2026-01-16 07:22:53 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - Initial user bookings count: 0
2026-01-16 07:22:53 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - Using payment method: Flutterwave
2026-01-16 07:22:53 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - API Request: POST https://api.dev.gowithgeo.com/api/package/book
2026-01-16 07:22:54 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - API Response: 200
2026-01-16 07:22:54 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - Book Package Response: 200
2026-01-16 07:22:54 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - ‚úÖ Booking successful! Response: {'status': 'success', 'message': 'Package booked successful', 'data': {'paymentLink': 'https://checkout-v2.dev-flutterwave.com/v3/hosted/pay/6f6d41c913a0aa53e522', 'fulfillment_status': 'unfulfilled', 'booking_status': 'pending', 'enquiry_status': 'NEW', 'from_api_gateway': False, 'id': 403, 'user_details': {'email': 'geo.qa.bot@gmail.com', 'phone': '1234567890', 'full_name': 'GEO Bot'}, 'package_id': 15, 'book_at_deal_price': False, 'paid_full_price': True, 'paid_lockdown_price': False, 'amount_paid': 1000, 'amount_remaining': 0, 'invoice_id': 1223, 'departure_date': '2026-05-01', 'adults': 1, 'children': 0, 'infants': 0, 'user_id': 151, 'organization': None, 'updatedAt': '2026-01-16T07:22:53.324Z', 'createdAt': '2026-01-16T07:22:53.324Z', 'booking_code': 'GP-MKGJX43WOO5XBGQC', 'fulfilled_by': None, 'enquiry_note': None, 'comment': None}}
2026-01-16 07:22:54 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - ‚úÖ Flutterwave booking detected (direct ID in data)
2026-01-16 07:22:54 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - ‚úÖ Flutterwave payment - paymentLink present (as expected)
2026-01-16 07:22:54 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - ‚úÖ Extracted booking ID: 403
2026-01-16 07:22:54 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - Payment link: https://checkout-v2.dev-flutterwave.com/v3/hosted/pay/6f6d41c913a0aa53e522
2026-01-16 07:22:54 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - SUCCESS: ‚úÖ Payment link verification: Payment link is valid and points to Flutterwave
2026-01-16 07:22:54 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - === Verifying booking appears in user's booked packages ===
2026-01-16 07:22:57 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - API Request: GET https://api.dev.gowithgeo.com/api/package/user/booked-packages
2026-01-16 07:22:57 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - API Response: 200
2026-01-16 07:22:57 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - Updated user bookings count: 17
2026-01-16 07:22:57 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - SUCCESS: ‚úÖ Booking count increased from 0 to 17
2026-01-16 07:22:57 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - SUCCESS: ‚úÖ New booking ID 403 found in user's booked packages
2026-01-16 07:22:57 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - API Request: GET https://api.dev.gowithgeo.com/api/package/user/booked-packages-analytics
2026-01-16 07:22:58 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - API Response: 200
2026-01-16 07:22:58 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - ‚úÖ User bookings analytics accessible
2026-01-16 07:22:58 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - SUCCESS: ‚úÖ Test completed successfully with Flutterwave payment!
2026-01-16 07:22:58 - GeoTravelGlobalLogger - INFO     - [logger.py:345] - üîç DEBUG: Test phase - call for src/tests/api_tests/test_package_api.py::TestPackageAPI::test_book_package_and_verify_user_bookings - Skipped: False